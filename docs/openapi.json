{
  "openapi": "3.1.0",
  "info": {
    "title": "Ethos API",
    "version": "1.0.1"
  },
  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "User login",
        "description": "Authenticate user and set access token in HTTP-only cookie",
        "operationId": "login_api_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "auth",
          "auth"
        ],
        "summary": "Register a new user",
        "description": "Creates a new user account if registration is enabled. On success, an authentication cookie is set.",
        "operationId": "register_api_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            }
          },
          "400": {
            "description": "Invalid username"
          },
          "403": {
            "description": "User registration is disabled"
          },
          "409": {
            "description": "User already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/disable-registration": {
      "post": {
        "tags": [
          "auth",
          "admin"
        ],
        "summary": "Enable or disable user registration",
        "description": "Allows an administrator to enable or disable user registration globally using an admin secret.",
        "operationId": "toggle_registration_api_auth_disable_registration_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegistrationToggle"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Registration state updated",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "401": {
            "description": "Invalid admin password"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "auth",
          "auth"
        ],
        "summary": "Logout current user",
        "description": "Logs out the currently authenticated user by deleting the authentication cookie.",
        "operationId": "logout_api_auth_logout_post",
        "responses": {
          "200": {
            "description": "User successfully logged out",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": [
          "auth",
          "auth"
        ],
        "summary": "Get current user",
        "description": "Returns the currently authenticated user.",
        "operationId": "me_api_auth_me_get",
        "responses": {
          "200": {
            "description": "Authenticated user data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          }
        }
      }
    },
    "/api/goals": {
      "post": {
        "tags": [
          "goals"
        ],
        "summary": "Create goal",
        "description": "Creates a goal for the authenticated user.",
        "operationId": "create_goal_api_goals_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoalCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Goal created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalOut"
                }
              }
            }
          },
          "400": {
            "description": "Invalid data"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "goals"
        ],
        "summary": "List goals",
        "description": "Lists goals for the authenticated user with pagination.",
        "operationId": "list_goals_api_goals_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalsOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/goals/{goal_id}": {
      "get": {
        "tags": [
          "goals"
        ],
        "summary": "Get goal",
        "description": "Gets a goal by id.",
        "operationId": "get_goal_api_goals__goal_id__get",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "goals"
        ],
        "summary": "Update goal",
        "description": "Updates goal fields partially.",
        "operationId": "update_goal_api_goals__goal_id__patch",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoalUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalOut"
                }
              }
            }
          },
          "400": {
            "description": "Invalid data"
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "goals"
        ],
        "summary": "Delete goal",
        "description": "Deletes a goal for the authenticated user.",
        "operationId": "delete_goal_api_goals__goal_id__delete",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/goals/{goal_id}/heatmap": {
      "get": {
        "tags": [
          "goals"
        ],
        "summary": "Goal heatmap",
        "description": "Returns per-day counts for a goal in a date range.",
        "operationId": "goal_heatmap_api_goals__goal_id__heatmap_get",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          },
          {
            "name": "from",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "From"
            }
          },
          {
            "name": "to",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "title": "To"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalHeatmapOut"
                }
              }
            }
          },
          "400": {
            "description": "Invalid date range"
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/goals/{goal_id}/revisions": {
      "post": {
        "tags": [
          "goal_revisions"
        ],
        "summary": "Create goal revision",
        "description": "Creates a new revision for a goal.",
        "operationId": "create_revision_api_goals__goal_id__revisions_post",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoalRevisionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Revision created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalRevisionOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "goal_revisions"
        ],
        "summary": "List revisions",
        "description": "Lists revisions for a goal.",
        "operationId": "list_revisions_api_goals__goal_id__revisions_get",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalRevisionsOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/goals/{goal_id}/logs": {
      "post": {
        "tags": [
          "goal_logs"
        ],
        "summary": "Create manual log",
        "description": "Creates a manual log entry for a goal.",
        "operationId": "create_goal_log_api_goals__goal_id__logs_post",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoalLogCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Log created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalLogOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "goal_logs"
        ],
        "summary": "List goal logs",
        "description": "Lists logs for a goal with pagination.",
        "operationId": "list_goal_logs_api_goals__goal_id__logs_get",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalLogsOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/goals/{goal_id}/logs/{log_id}": {
      "patch": {
        "tags": [
          "goal_logs"
        ],
        "summary": "Update manual log",
        "description": "Updates a manual log entry value.",
        "operationId": "update_goal_log_api_goals__goal_id__logs__log_id__patch",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          },
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Log Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoalLogUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalLogOut"
                }
              }
            }
          },
          "404": {
            "description": "Goal or log not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "goal_logs"
        ],
        "summary": "Delete manual log",
        "description": "Deletes a manual log entry.",
        "operationId": "delete_goal_log_api_goals__goal_id__logs__log_id__delete",
        "parameters": [
          {
            "name": "goal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Goal Id"
            }
          },
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Log Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "404": {
            "description": "Goal or log not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/logs": {
      "get": {
        "tags": [
          "goal_logs"
        ],
        "summary": "List logs by range",
        "description": "Lists logs filtered by date range.",
        "operationId": "list_logs_by_date_range_api_logs_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Date"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 200,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoalLogsOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions": {
      "post": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Create focus session",
        "description": "Creates a focus session. Returns conflict if an active session exists.",
        "operationId": "create_session_api_focus_sessions_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FocusSessionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          },
          "400": {
            "description": "Invalid data"
          },
          "409": {
            "description": "Active session exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "List sessions",
        "description": "Lists sessions with pagination.",
        "operationId": "list_sessions_api_focus_sessions_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionsOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions/{session_id}/complete": {
      "post": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Complete session",
        "description": "Marks the session as completed and creates a log if applicable.",
        "operationId": "complete_session_api_focus_sessions__session_id__complete_post",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          },
          "400": {
            "description": "Session already finished"
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions/{session_id}/pause": {
      "post": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Pause session",
        "description": "Pauses a running focus session.",
        "operationId": "pause_session_api_focus_sessions__session_id__pause_post",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          },
          "400": {
            "description": "Session is not running"
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions/{session_id}/resume": {
      "post": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Resume session",
        "description": "Resumes a paused focus session.",
        "operationId": "resume_session_api_focus_sessions__session_id__resume_post",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          },
          "400": {
            "description": "Session is not paused"
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions/{session_id}/cancel": {
      "post": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Cancel session",
        "description": "Cancels a focus session.",
        "operationId": "cancel_session_api_focus_sessions__session_id__cancel_post",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          },
          "400": {
            "description": "Session already finished"
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/focus/sessions/current": {
      "get": {
        "tags": [
          "focus_sessions"
        ],
        "summary": "Current session",
        "description": "Returns the current active session if any.",
        "operationId": "get_current_session_api_focus_sessions_current_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FocusSessionOut"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/daily": {
      "get": {
        "tags": [
          "stats"
        ],
        "summary": "Daily stats",
        "description": "Returns aggregated daily statistics.",
        "operationId": "daily_stats_api_stats_daily_get",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DailyStatsOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/weekly": {
      "get": {
        "tags": [
          "stats"
        ],
        "summary": "Weekly stats",
        "description": "Returns aggregated stats for the current week.",
        "operationId": "weekly_stats_api_stats_weekly_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WeeklyStatsOut"
                }
              }
            }
          }
        }
      }
    },
    "/api/stats/yearly": {
      "get": {
        "tags": [
          "stats"
        ],
        "summary": "Yearly stats",
        "description": "Returns aggregated stats for the current year.",
        "operationId": "yearly_stats_api_stats_yearly_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/YearlyStatsOut"
                }
              }
            }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "summary": "Health check",
        "operationId": "health_check_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DailyStatsOut": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "goal_value_sum": {
            "type": "integer",
            "title": "Goal Value Sum"
          },
          "goal_logs_count": {
            "type": "integer",
            "title": "Goal Logs Count"
          },
          "focus_seconds": {
            "type": "integer",
            "title": "Focus Seconds"
          },
          "focus_sessions_count": {
            "type": "integer",
            "title": "Focus Sessions Count"
          }
        },
        "type": "object",
        "required": [
          "date",
          "goal_value_sum",
          "goal_logs_count",
          "focus_seconds",
          "focus_sessions_count"
        ],
        "title": "DailyStatsOut"
      },
      "FocusSessionCreate": {
        "properties": {
          "duration_seconds": {
            "type": "integer",
            "maximum": 7200.0,
            "minimum": 300.0,
            "title": "Duration Seconds"
          },
          "goal_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Goal Id"
          }
        },
        "type": "object",
        "required": [
          "duration_seconds"
        ],
        "title": "FocusSessionCreate"
      },
      "FocusSessionOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id"
          },
          "goal_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Goal Id"
          },
          "duration_seconds": {
            "type": "integer",
            "title": "Duration Seconds"
          },
          "paused_seconds": {
            "type": "integer",
            "title": "Paused Seconds"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "started_at": {
            "type": "string",
            "format": "date-time",
            "title": "Started At"
          },
          "ended_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ended At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "goal_id",
          "duration_seconds",
          "paused_seconds",
          "status",
          "started_at",
          "ended_at"
        ],
        "title": "FocusSessionOut"
      },
      "FocusSessionsOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/FocusSessionOut"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "FocusSessionsOut"
      },
      "GoalCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name"
          },
          "goal_type": {
            "$ref": "#/components/schemas/GoalType"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "name",
          "goal_type"
        ],
        "title": "GoalCreate"
      },
      "GoalHeatmapOut": {
        "properties": {
          "goal_id": {
            "type": "integer",
            "title": "Goal Id"
          },
          "from": {
            "type": "string",
            "format": "date",
            "title": "From"
          },
          "to": {
            "type": "string",
            "format": "date",
            "title": "To"
          },
          "unit": {
            "type": "string",
            "const": "day",
            "title": "Unit"
          },
          "values": {
            "items": {
              "$ref": "#/components/schemas/HeatmapValue"
            },
            "type": "array",
            "title": "Values"
          }
        },
        "type": "object",
        "required": [
          "goal_id",
          "from",
          "to",
          "unit",
          "values"
        ],
        "title": "GoalHeatmapOut"
      },
      "GoalLogCreate": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "value": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "date",
          "value"
        ],
        "title": "GoalLogCreate"
      },
      "GoalLogOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "goal_id": {
            "type": "integer",
            "title": "Goal Id"
          },
          "focus_session_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Focus Session Id"
          },
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "value": {
            "type": "integer",
            "title": "Value"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "goal_id",
          "focus_session_id",
          "date",
          "value",
          "source",
          "created_at"
        ],
        "title": "GoalLogOut"
      },
      "GoalLogUpdate": {
        "properties": {
          "value": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "value"
        ],
        "title": "GoalLogUpdate"
      },
      "GoalLogsOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GoalLogOut"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "GoalLogsOut"
      },
      "GoalOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "user_id": {
            "type": "integer",
            "title": "User Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "goal_type": {
            "$ref": "#/components/schemas/GoalType"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "name",
          "goal_type",
          "is_active",
          "created_at"
        ],
        "title": "GoalOut"
      },
      "GoalRevisionCreate": {
        "properties": {
          "target_value": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Target Value"
          },
          "valid_from": {
            "type": "string",
            "format": "date",
            "title": "Valid From"
          },
          "valid_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Valid To"
          }
        },
        "type": "object",
        "required": [
          "target_value",
          "valid_from"
        ],
        "title": "GoalRevisionCreate"
      },
      "GoalRevisionOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "goal_id": {
            "type": "integer",
            "title": "Goal Id"
          },
          "target_value": {
            "type": "integer",
            "title": "Target Value"
          },
          "valid_from": {
            "type": "string",
            "format": "date",
            "title": "Valid From"
          },
          "valid_to": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Valid To"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "goal_id",
          "target_value",
          "valid_from",
          "valid_to",
          "created_at"
        ],
        "title": "GoalRevisionOut"
      },
      "GoalRevisionsOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GoalRevisionOut"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "GoalRevisionsOut"
      },
      "GoalType": {
        "type": "string",
        "enum": [
          "time",
          "count",
          "boolean"
        ],
        "title": "GoalType"
      },
      "GoalUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "goal_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/GoalType"
              },
              {
                "type": "null"
              }
            ]
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active"
          }
        },
        "type": "object",
        "title": "GoalUpdate"
      },
      "GoalsOut": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GoalOut"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total"
        ],
        "title": "GoalsOut"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HeatmapValue": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "date",
          "count"
        ],
        "title": "HeatmapValue"
      },
      "RegistrationToggle": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "admin_password": {
            "type": "string",
            "title": "Admin Password"
          }
        },
        "type": "object",
        "required": [
          "enabled",
          "admin_password"
        ],
        "title": "RegistrationToggle"
      },
      "UserCreate": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserCreate"
      },
      "UserLogin": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserLogin"
      },
      "UserOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "is_admin": {
            "type": "boolean",
            "title": "Is Admin"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "username",
          "is_active",
          "is_admin",
          "created_at"
        ],
        "title": "UserOut"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WeeklyDayStats": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date"
          },
          "goal_value_sum": {
            "type": "integer",
            "title": "Goal Value Sum"
          },
          "focus_seconds": {
            "type": "integer",
            "title": "Focus Seconds"
          }
        },
        "type": "object",
        "required": [
          "date",
          "goal_value_sum",
          "focus_seconds"
        ],
        "title": "WeeklyDayStats"
      },
      "WeeklyStatsOut": {
        "properties": {
          "start_date": {
            "type": "string",
            "format": "date",
            "title": "Start Date"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "title": "End Date"
          },
          "goal_value_sum": {
            "type": "integer",
            "title": "Goal Value Sum"
          },
          "focus_seconds": {
            "type": "integer",
            "title": "Focus Seconds"
          },
          "days": {
            "items": {
              "$ref": "#/components/schemas/WeeklyDayStats"
            },
            "type": "array",
            "title": "Days"
          }
        },
        "type": "object",
        "required": [
          "start_date",
          "end_date",
          "goal_value_sum",
          "focus_seconds",
          "days"
        ],
        "title": "WeeklyStatsOut"
      },
      "YearlyMonthStats": {
        "properties": {
          "month": {
            "type": "integer",
            "title": "Month"
          },
          "goal_value_sum": {
            "type": "integer",
            "title": "Goal Value Sum"
          },
          "focus_seconds": {
            "type": "integer",
            "title": "Focus Seconds"
          }
        },
        "type": "object",
        "required": [
          "month",
          "goal_value_sum",
          "focus_seconds"
        ],
        "title": "YearlyMonthStats"
      },
      "YearlyStatsOut": {
        "properties": {
          "year": {
            "type": "integer",
            "title": "Year"
          },
          "goal_value_sum": {
            "type": "integer",
            "title": "Goal Value Sum"
          },
          "focus_seconds": {
            "type": "integer",
            "title": "Focus Seconds"
          },
          "months": {
            "items": {
              "$ref": "#/components/schemas/YearlyMonthStats"
            },
            "type": "array",
            "title": "Months"
          }
        },
        "type": "object",
        "required": [
          "year",
          "goal_value_sum",
          "focus_seconds",
          "months"
        ],
        "title": "YearlyStatsOut"
      }
    }
  }
}
